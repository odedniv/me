---
const isProd = import.meta.env.PROD

const matomoSiteId = isProd ? "2" : "4"
---

<!-- Matomo -->
<script define:vars={{ matomoSiteId }}>
	window._paq = window._paq || [];
	_paq.push(["setDoNotTrack", true]);
	_paq.push(["disableCookies"]);
	_paq.push(['enableLinkTracking']);
	_paq.push(['setTrackerUrl', '//analytics.odedniv.me/matomo.php']);
	_paq.push(['setSiteId', matomoSiteId]);

	(() => {
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.async=true; g.src='//analytics.odedniv.me/matomo.js'; s.parentNode.insertBefore(g,s);
	})();

	document.addEventListener("astro:page-load", () => {
		var _paq = window._paq;
		_paq.push(['setCustomUrl', window.location.pathname]);
		_paq.push(['setDocumentTitle', document.title]);
		_paq.push(['trackPageView']);
	});
</script>
	<!-- End Matomo Code -->
